<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iniciar sesi√≥n</title>
  <link rel="icon" href="/img/fc885963d690a6787ca787cf208cdd25_1778x266_fit.png" type="image/png" />
  <link rel="stylesheet" href="/css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <!-- Estilos m√≠nimos para el ojito -->
  <style>
    .password-field { position: relative; }
    .password-field input { padding-right: 2.5rem; }
    .toggle-password {
      position: absolute; right: .6rem; top: 50%; transform: translateY(-50%);
      background: transparent; border: 0; cursor: pointer; font-size: 1rem; line-height: 1;
    }
    .toggle-password:focus { outline: 2px solid #5f9f9c33; border-radius: .25rem; }
  </style>
</head>

<body>
  <div class="login-container">
    <div class="login-card">
      <div class="login-logo">
        <img src="/img/fc885963d690a6787ca787cf208cdd25_1778x266_fit.png" alt="Logo Cl√≠nica de Desarrollo Pilar">
      </div>
      <h2>Iniciar sesi√≥n</h2>

      <!-- ‚úÖ Form corregido -->
      <form id="loginForm">
        <label for="usuario">Usuario</label>
        <input type="text" id="usuario" name="usuario" required />

        <label for="clave">Contrase√±a</label>
        <div class="password-field">
          <input type="password" id="clave" name="clave" required />
          <button type="button" id="togglePassword" class="toggle-password" aria-label="Mostrar u ocultar contrase√±a">üëÅÔ∏è</button>
        </div>

        <button type="submit" class="btn">Ingresar</button>
        <!-- Evitamos que env√≠e el form -->
        <button type="button" id="btnRecovery" class="btn">Recuperar contrase√±a</button>
      </form>
    </div>
  </div>

  <!-- üîπ Parche para reemplazar localhost por el dominio actual -->
  <script>
    (function () {
      var ORIGIN = location.origin;
      var _fetch = window.fetch;
      window.fetch = function (input, init) {
        var url = (typeof input === 'string') ? input : input.url;
        if (url && url.indexOf('http://localhost:3000') === 0) {
          url = ORIGIN + url.slice('http://localhost:3000'.length);
          if (typeof input === 'string') input = url;
          else input = new Request(url, input);
        }
        return _fetch(input, init);
      };
      var _open = XMLHttpRequest.prototype.open;
      XMLHttpRequest.prototype.open = function (method, url) {
        if (url && url.indexOf('http://localhost:3000') === 0) {
          url = ORIGIN + url.slice('http://localhost:3000'.length);
        }
        return _open.apply(this, [method, url].concat([].slice.call(arguments, 2)));
      };
    })();
  </script>

  <!-- ‚úÖ JS de login -->
  <script src="/js/config.js"></script>
  <script src="/js/index.js"></script>
</body>

</html>
