<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iniciar sesi√≥n</title>
  <link rel="icon" href="/img/fc885963d690a6787ca787cf208cdd25_1778x266_fit.png" type="image/png" />
  <link rel="stylesheet" href="/css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <!-- CSS m√≠nimo y aislado SOLO para el ojito -->
  <style>
    .password-field{ position:relative; width:100%; }
    .password-field input{ width:100%; display:block; padding-right:3.25rem; } /* espacio para el bot√≥n */
    #togglePassword{
      position:absolute; top:50%; right:.6rem; transform:translateY(-50%);
      width:28px; height:28px; display:flex; align-items:center; justify-content:center;
      border:0; background:transparent; border-radius:6px; cursor:pointer; line-height:1; font-size:18px;
    }
    #togglePassword:hover{ background:rgba(0,0,0,.06); }
  </style>
</head>

<body>
  <div class="login-container">
    <div class="login-card">
      <div class="login-logo">
        <img src="/img/fc885963d690a6787ca787cf208cdd25_1778x266_fit.png" alt="Logo Cl√≠nica de Desarrollo Pilar">
      </div>
      <h2>Iniciar sesi√≥n</h2>

      <form id="loginForm">
        <label for="usuario">Usuario</label>
        <input type="text" id="usuario" name="usuario" autocomplete="username" required />

        <label for="clave">Contrase√±a</label>
        <div class="password-field">
          <input type="password" id="clave" name="clave" autocomplete="current-password" required />
          <button type="button" id="togglePassword" aria-label="Mostrar u ocultar contrase√±a">üëÅÔ∏è</button>
        </div>

        <button type="submit" class="btn">Ingresar</button>
        <button type="button" id="btnRecovery" class="btn">Recuperar contrase√±a</button>
      </form>
    </div>
  </div>

  <!-- Parche de origen (si us√°s localhost en JS) -->
  <script>
    (function () {
      var ORIGIN = location.origin, _fetch = window.fetch;
      window.fetch = function (input, init) {
        var url = (typeof input === 'string') ? input : input.url;
        if (url && url.startsWith('http://localhost:3000')) {
          url = ORIGIN + url.slice('http://localhost:3000'.length);
          input = (typeof input === 'string') ? url : new Request(url, input);
        }
        return _fetch(input, init);
      };
      var _open = XMLHttpRequest.prototype.open;
      XMLHttpRequest.prototype.open = function (m, url) {
        if (url && url.startsWith('http://localhost:3000')) {
          url = ORIGIN + url.slice('http://localhost:3000'.length);
        }
        return _open.apply(this, [m, url].concat([].slice.call(arguments, 2)));
      };
    })();
  </script>

  <script src="/js/config.js"></script>
  <script src="/js/index.js"></script>
</body>
</html>
